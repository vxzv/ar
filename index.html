<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR</title>
    <!-- AFrameライブラリ読み込み -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- AR.jsライブラリ読み込み -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <!-- アニメーション読み込み　-->
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <meta name="apple-mobile-web-app-capable" content="yes">
</head>



<body style="margin : 0px; overflow: hidden;">

        <!-- A-Frame の VR空間に AR.js を紐づける（デバッグUIを非表示） -->
    <a-scene embedded arjs="debugUIEnabled:false;">
            <!-- AR用のカメラを置く -->
            <a-camera>
                <a-cursor fuse="true" color="white" scale="2 2">
                    <a-animation 
                         begin="mouseenter" 
                         easing="ease-out" 
                         attribute="scale" 
                         fill="forwards" 
                         from="2 2 2" 
                         to="1 1 1" 
                         dur="300">
                    </a-animation>
                    <a-animation 
                         begin="mouseenter"
                         attribute="color" 
                         fill="forwards" 
                         from="white" 
                         to="red" 
                         dur="0">
                    </a-animation>
                    <a-animation 
                         begin="mouseleave" 
                         easing="ease-in" 
                         attribute="scale" 
                         fill="forwards" 
                         from="1 1 1" 
                         to="2 2 2" 
                         dur="300">
                    </a-animation>
                    <a-animation 
                         begin="mouseleave" 
                         attribute="color" 
                         fill="forwards" 
                         from="red" 
                         to="black" 
                         dur="0">
                    </a-animation>
                </a-cursor>
            </a-camera>
            
        <a-assets>
            <!--玉昌会ロゴ-->
            <a-asset-item id="logo" src="logo.gltf"></a-asset-item>
            <video id="video" src="logo.mp4" autoplay muted webkit-playsinline playsinline loop="true"></video>
        </a-assets>  
        

        <!-- マーカーを登録 -->
                <!-- x y zの順 x横 y縦 z奥行 -->
        <a-marker  type="pattern" url="pattern-qrcode_vxzv.github.io.patt">
            <a-entity  position="0 0 0" rotation="-45 0 0" scale="0.5 0.5 0.5" gltf-model="#logo" animation-mixer></a-entity> 
            <a-cylinder position="-2.5 -1 1" radius="0.3"rotation="0 0 0" height="0.3" color="#4CC3D9"></a-cylinder>
            <a-cylinder position="-1.5 -1 1" radius="0.3"rotation="0 0 0" height="0.3" color="#EF2D5E"></a-cylinder>
            <a-cylinder position="-0.5 -1 1" radius="0.3"rotation="0 0 0" height="0.3" color="#FFC65D"></a-cylinder>
            <a-cylinder position="0.5 -1 1" radius="0.3"rotation="0 0 0" height="0.3" color="#FFC65D"></a-cylinder>
            <a-video src="#video" position="-1 1 -1.5" rotation="-20 0 0" width="4" height="2.25"></a-video>
            <!-- 再生/停止用のボタン -->
<a-entity
    id="playButton"
    geometry="primitive: plane; height: 1; width: 1"
    material="src: #play"
    position="-7.3 -1.2 0.6"
    rotation="0 90 0"
    ></a-entity>

    <a-entity
    id="stopButton"
    click-stop
    geometry="primitive: plane; height: 1; width: 1"
    material="src: #stop"
    position="-7.3 -1.2 -0.67"
    rotation="0 90 0"
    ></a-entity>
        </a-marker>



    </a-scene>
    <script>document.addEventListener("DOMContentLoaded", function(event) {
        var scene = document.querySelector("a-scene");
        var video = document.getElementById("video");
    
        if (scene.hasLoaded) {
          run();
        } else {
          scene.addEventListener("loaded", run);
        }
    
        function run () {
          scene.querySelector("#playButton").addEventListener("click", function(e){
                video.play();
            });
        }
    
      })
    
      AFRAME.registerComponent('click-stop', {
      init: function () {
        this.el.addEventListener('click', function (event) {
          document.getElementById("video").pause();
        });
      }
    });
    
    
    </script>
</body> 
</html>
